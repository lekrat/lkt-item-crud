(function(t,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("lkt-http-client")):typeof define=="function"&&define.amd?define(["exports","vue","lkt-http-client"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.LktItemCrud={},t.Vue,t.lktHttpClient))})(this,function(t,e,u){"use strict";const p={class:"lkt-item-crud"},f={key:0,class:"lkt-item-crud_header"},k={class:"lkt-item-crud_header-title"},h={class:"lkt-item-crud_header-slot"},_={key:1,class:"lkt-item-crud_content"},V={name:"LktItemCrud",inheritAttrs:!1},y=e.defineComponent({...V,props:{modelValue:{type:Object,required:!1,default:()=>({})},readResource:{type:String,required:!0},readData:{type:Object,required:!1,default:()=>({})},title:{type:String,default:""}},emits:["update:modelValue","read","save","perms"],setup(o,{expose:c,emit:B}){const d=o,i=B,n=e.ref(!0),r=e.ref(d.modelValue),s=e.ref([]),m=async()=>await u.httpCall(d.readResource,d.readData).then(l=>{n.value=!1,r.value=l.data,s.value=l.perms,i("read",l)});return e.watch(()=>d.modelValue,l=>r.value=l),e.watch(r,()=>i("update:modelValue",r.value)),e.watch(s,()=>i("perms",s.value)),d.readResource&&m(),c({fetchItem:m}),(l,S)=>{const q=e.resolveComponent("lkt-loader");return e.openBlock(),e.createElementBlock("article",p,[n.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("header",f,[e.createElementVNode("h1",k,e.toDisplayString(o.title),1),e.createElementVNode("div",h,[e.renderSlot(l.$slots,"post-title",{item:r.value})])])),n.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",_,[e.renderSlot(l.$slots,"item",{item:r.value})])),n.value?(e.openBlock(),e.createBlock(q,{key:2})):e.createCommentVNode("",!0)])}}}),a={detail:0,form:1,quick:2,card:3,isValid(o){return[a.detail,a.form,a.quick,a.card].indexOf(o)!==-1}},C={install:(o,c={})=>{o.component("LktItemCrud",y)}};t.ViewMode=a,t.default=C,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
